---
title: "pwnable.kr fd"
Categories:
    - Pwn
tag:
    - Pwn
    - Writeup
    - Pwnable.kr
---

> Mommy! what is a file descriptor in Linux?  
>  
> \* try to play the wargame your self but if you are ABSOLUTE beginner, follow this tutorial link:  
> <https://youtu.be/971eZhMHQQw>  
>  
> ssh fd@pwnable.kr -p2222 (pw:guest)  

<!-- more -->

这个题直接给了源码，`cat`出来看看。

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char buf[32];
int main(int argc, char* argv[], char* envp[]){
    if(argc<2){
        printf("pass argv[1] a number\n");
        return 0;
    }
    int fd = atoi( argv[1] ) - 0x1234;
    int len = 0;
    len = read(fd, buf, 32);
    if(!strcmp("LETMEWIN\n", buf)){
        printf("good job :)\n");
        system("/bin/cat flag");
        exit(0);
    }
    printf("learn about Linux file IO\n");
    return 0;
}
```

由源码可以知道这题主要考察`read()`函数的使用。`read()`的功能是把参数fd 所指的文件传送count个字节到buf指针所指的内存中。

`ssize_t read(int fd,void * buf ,size_t count);`

我们能控制的是`fd`参数，下面给出linux的文件描述符。

| Integer value | Name | file stream |
| ------------- | ---- | ----------- |
| 0 | 标准输入 | stdin |
| 1 | 标准输出 | stdout |
| 2 | 标准错误 | stderr |

为了使`buf`的值由我们键盘输入，我们只需要保证`fd`参数的值为的值为`标准输入`(`0`)就行了。

`0x1234`的十进制值为`4660`，所以我们传的第一个参数为`4660`。最后再按着流程输入`LETMEWIN`就ok了。

flag: `mommy! I think I know what a file descriptor is!!`